# oskernel-riscv-research

## 前言

RISC-V（读作”risk-five“），表示第五代精简指令集，起源于2010年伯克利大学并行计算实验室(Par Lab) 的Krste Asanovic教授、Andrew Waterman和Yunsup Lee研究生的一个项目（该项目也由David Patterson指导），希望选择一款指令集用于科研和教学，该项目在x86、ARM等指令集架构中徘徊，最终决定自己设计一个全新的指令集，RISC-V由此诞生。RISC-V相对于x86和ARM的不同寻常之处，在于它是最近诞生的和开源的，这让它没有任何历史包袱，能够基于现今的计算机理念进行全新的设计。另外还在于，它是模块化的。它的核心是一个名为RV32I的基础ISA，运行一个完整
的软件栈。RV32I是固定的，永远不会改变。这为编译器编写者，操作系统开发人员和汇编语言程序员提供了稳定的目标。模块化来源于可选的标准扩展，根据应用程序的需要，硬件可以包含或不包含这些扩展。这种模块化特性使得RISC-V具有了袖珍化、低能耗的特点，而这对于嵌入式应用可能至关重要。

RISC-V的七种衡量标准：

⚫ 成本（美元硬币）

⚫ 简洁性（轮子）

⚫ 性能（速度计）

⚫ 架构和具体实现的分离（分开的两个半圆）

⚫ 提升空间（手风琴）

⚫ 程序大小（相对的压迫着一条线的两个箭头）

⚫ 易于编程/编译/链接（儿童积木“像 ABC 一样简单”）

xv6是由麻省理工学院(MIT)开发的一个教学目的的操作系统，它以宏内核的架构，实现了操作系统内核最核心的东西：进程管理、虚拟内存管理、文件系统，简化掉了VFS、总线和大量的设备驱动相关的内容，为用户级的应用程序提供了最核心的系统调用，并提供了一个shell的实现，以及提供了一些用户级的工具程序：cat、ls、grep等。以上这些模块进行了非常精简以及优雅的实现，让我们能够专注于操作系统最核心的部分，降低操作系统学习的门槛。

xv6-riscv是xv6对64位多核riscv指令集架构CPU的支持，用C语言实现，整个工程代码非常符合Unix和C语言哲学：简单、自由、强大，非常值得一读，读这样的好代码是一种美的享受。

本专栏会对以下几个方面进行研究和探讨：

1.对RISC-V指令集架构的研究

2.对xv6-riscv实现的代码注释

3.对unikernel以及hypervisor技术的探索和学习

4.探索基于Rust语言开发操作系统内核组件

https://github.com/shupiankuaile/oskernel-riscv-research

## 建议

1. 知识准备

（1）对微型计算机组成结构建立一定的心智模式

（2）对RISC-V指令集架构、汇编编程有一定的了解，特别要能理解CPU的运行过程

（3）了解C语言、C与汇编程序相互调用、编译过程以及ELF文件格式

（4）对现代操作系统内核体系结构有一定的概括性的认识

2. 学习建议

学一个东西最好的方式就是实践，程序也是一样，只有带着问题看源码、调试软件运行的流程，才能对其有较深入的理解。
建议在有了一定的知识准备后，能够带着问题自行阅读源码，当遇到看不懂的代码时，在对其相关的概念进行更深入的学习，然后再回来看代码。

过去我阅读大量介绍操作系统、Linux内核的东西，看书的时候感觉自己已经理解了，但是过段时间就忘了并且也不知道怎么实现的，其实这种情况的发生就是因为还没有真正的理解。后来我开始尝试阅读Linux内核源码，但Linux太庞大了，即使是早些年的2.6版，代码量也是非常巨大的，经常读着读着就迷失在代码的调用流程里，而且因为Linux是一个通用操作系统，它的代码里有很多细节处理，这些细节代码会让人无法抓住操作系统内核的核心的主线，大大提高了学习的困难。

相比于Linux，xv6是非常适合学习的，但因为操作系统内核确实是一个需要大量知识积累、综合性非常强的软件，所以即使在阅读xv6代码时，也经常会卡在某处，这时候不要放弃，可以先休息一下，把相关概念深入学习，积累一段时间。
有时候经过休息，再重新阅读代码，以往卡住的地方，你一下子通了，会让你产生一种豁然开朗的感觉，生出巨大的成就感和信心。

所以找到一定的方法进行持续学习，拥有一定的耐心，我觉得是学习内核最好的方式了。
并且因为云计算、硬件、计算机理念的升级，当今内核架构也是在不停演变的，宏内核-->微内核-->混合内核-->LibOS-->unikernel以及虚拟化技术，我们一点点的进行持续领域纵深，就能够掌握当今计算机最先进的技术。

国内清华大学也有着类似的教学操作系统：uCore，还有个Rust语言版本rCore，也非常值得学习。清华的老师还设置了循序渐进的操作系统内核的教学实验，能够边练习边理解操作系统，是非常好的学习资料。http://rcore-os.cn/rCore-Tutorial-Book-v3/

## 最后

对于操作系统内核我也是在学习中，欢迎对此有兴趣的朋友能够一起交流、学习，也欢迎技术大佬指正。

希望能建立起一个轻松自由、开源、和谐的技术社区。

我是唐佳旭，一个程序员。
